<div class="cp-contact-manager-config">
  <!-- Header -->
  <div class="cp-config-header">
    <h2><i class="fas fa-users"></i> Gerenciador de Contatos</h2>
    <p>Configure as redes de contatos para cada personagem. As alterações são salvas automaticamente em tempo real.</p>
  </div>

  <!-- Stats Panel -->
  <div class="cp-stats-panel">
    <div class="cp-stat-item">
      <span class="cp-stat-label">Total de Personagens:</span>
      <span class="cp-stat-value">{{characterActors.length}}</span>
    </div>
    <div class="cp-stat-item">
      <span class="cp-stat-label">Total de Contatos:</span>
      <span class="cp-stat-value">{{totalContacts}}</span>
    </div>
    <div class="cp-stat-item">
      <span class="cp-stat-label">Status:</span>
      <span class="cp-stat-value online">Ativo</span>
    </div>
  </div>

  <!-- Control Panel -->
  <div class="cp-control-panel">
    <div class="cp-search-filter-container">
      <input type="text" class="cp-search-filter" placeholder="Filtrar personagens..." />
      <i class="fas fa-search cp-filter-icon"></i>
    </div>
  </div>

  <!-- Contact Networks -->
  <div class="cp-networks-container">
    {{#each characterActors}}
    <div class="cp-network-section" data-actor-id="{{this.id}}">
      <!-- Actor Header -->
      <div class="cp-actor-header">
        <div class="cp-actor-info">
          <img src="{{this.img}}" alt="{{this.name}}" class="cp-actor-avatar" />
          <div class="cp-actor-details">
            <h3>{{this.name}}</h3>
            <span class="cp-contact-count" id="contact-count-{{this.id}}">
              {{#with (lookup ../contactNetworks this.id)}}{{contacts.length}}{{else}}0{{/with}} contatos
            </span>
          </div>
        </div>
        <div class="cp-actor-controls">
          <button class="cp-add-contact-btn" data-actor-id="{{this.id}}" title="Adicionar contatos">
            <i class="fas fa-plus"></i>
            Adicionar
          </button>
        </div>
      </div>

      <!-- Selected Contacts Chips -->
      <div class="cp-selected-contacts" id="selected-contacts-{{this.id}}">
        {{#with (lookup ../contactNetworks this.id)}}
        {{#if contacts.length}}
        <div class="cp-contacts-chips">
          {{#each contacts}}
          <div class="cp-contact-chip" data-contact-id="{{this.id}}" data-actor-id="{{../actor.id}}">
            <img src="{{this.img}}" alt="{{this.name}}" class="cp-chip-avatar" />
            <span class="cp-chip-name">{{this.name}}</span>
            <button class="cp-remove-contact" title="Remover {{this.name}}">
              <i class="fas fa-times"></i>
            </button>
          </div>
          {{/each}}
        </div>
        {{else}}
        <div class="cp-no-contacts" id="no-contacts-{{../actor.id}}">
          <p>Nenhum contato configurado para este personagem.</p>
        </div>
        {{/if}}
        {{else}}
        <div class="cp-no-contacts" id="no-contacts-{{this.id}}">
          <p>Nenhum contato configurado para este personagem.</p>
        </div>
        {{/with}}
      </div>
    </div>
    {{else}}
    <div class="cp-no-actors">
      <div class="cp-no-actors-icon">
        <i class="fas fa-user-slash"></i>
      </div>
      <h3>Nenhum Personagem Encontrado</h3>
      <p>Não há personagens (actors) no jogo para configurar contatos.</p>
    </div>
    {{/each}}
  </div>

  <!-- Footer -->
  <div class="cp-config-footer">
    <p><i class="fas fa-info-circle"></i> As alterações são salvas automaticamente e sincronizadas em tempo real entre
      todos os usuários.</p>
  </div>
</div>
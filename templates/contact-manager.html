<form class="cp-agent cp-contact-manager">
  <header class="sheet-header">
    <h1 class="charname">Contact Network Manager</h1>
    <div class="manager-status">
      <span class="status-indicator">GM Interface</span>
    </div>
  </header>

  <section class="sheet-body">
    <div class="cp-manager-interface">
      <!-- Control Panel -->
      <div class="cp-control-panel">
        <button type="button" class="cp-refresh-contacts" title="Refresh Contact Networks">
          <i class="fas fa-sync-alt"></i>
          Refresh
        </button>
        <div class="cp-stats">
          <span class="cp-stat-item">
            <strong>{{characterActors.length}}</strong> Characters
          </span>
          <span class="cp-stat-item">
            <strong>{{totalContacts}}</strong> Total Contacts
          </span>
        </div>
      </div>

      <!-- Contact Networks -->
      <div class="cp-contact-networks">
        {{#each contactNetworks}}
        <div class="cp-network-section" data-actor-id="{{this.actor.id}}">
          <div class="cp-network-header">
            <div class="cp-actor-info">
              <img src="{{this.actor.img}}" alt="{{this.actor.name}}" class="cp-actor-avatar" />
              <div class="cp-actor-details">
                <h3>{{this.actor.name}}</h3>
                <span class="cp-contact-count">{{this.contacts.length}} contacts</span>
              </div>
            </div>
            <button type="button" class="cp-add-contact" data-actor-id="{{this.actor.id}}" title="Add Contact">
              <i class="fas fa-plus"></i>
              Add Contact
            </button>
          </div>

          <div class="cp-contacts-grid">
            {{#each this.contacts}}
            <div class="cp-contact-card" data-contact-id="{{this.id}}">
              <img src="{{this.img}}" alt="{{this.name}}" class="cp-contact-avatar" />
              <div class="cp-contact-details">
                <span class="cp-contact-name">{{this.name}}</span>
                <span class="cp-contact-status online">Online</span>
              </div>
              <div class="cp-contact-actions">
                <button type="button" class="cp-remove-contact" data-actor-id="{{../this.actor.id}}"
                  data-contact-id="{{this.id}}" title="Remove Contact">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
            {{else}}
            <div class="cp-no-contacts">
              <p>No contacts yet</p>
              <small>Click "Add Contact" to add contacts to this character's network</small>
            </div>
            {{/each}}
          </div>
        </div>
        {{else}}
        <div class="cp-no-networks">
          <p>No character actors found</p>
          <small>Create character actors to manage their contact networks</small>
        </div>
        {{/each}}
      </div>
    </div>
  </section>
</form>